# TRPG プロジェクト変更のための TODO リスト（Playwright分析更新版）

## 🔍 更新情報

**更新日**: 2025年1月6日  
**更新理由**: Playwright MCPサーバーを使用した包括的なアプリケーション分析結果を反映  
**分析結果**: [TRPG実装不足点_Playwright分析結果.md](./TRPG実装不足点_Playwright分析結果.md)

## 📊 実装状況概要

### ✅ **完了済み (90%以上)**
- TRPGセッション画面の包括的実装
- キャラクター管理（Stormbringerベース）
- 敵・NPC管理システム
- クエスト管理システム
- 開発者モード基本実装
- ゲームシステム選択機能
- キャラクターシート印刷・エクスポート機能

### ⚠️ **部分完了・要修正 (40-70%)**
- ブランディング・UI一貫性
- World Building UI
- Timeline UI
- バックエンド統合

### ❌ **未実装・大きく不足 (10%未満)**
- 画像生成機能
- リアルタイム通信

---

## 🚨 **緊急度 高 (High Priority) - 即座に対応**

### 1. ブランディング・UI一貫性の修正

#### 1.1 ホーム画面ブランディング修正
- [x] **CRITICAL**: `apps/frontend/src/pages/HomePage.tsx` - 「小説創作支援ツール」→「TRPG AIエージェントGM」に変更
- [x] **CRITICAL**: 全画面で「プロジェクト」→「キャンペーン」用語統一
- [x] **HIGH**: 機能説明をTRPG向けに全面修正
- [x] **HIGH**: アプリケーションタイトル・メタデータ更新
- [ ] **MEDIUM**: TRPGアイコン・ロゴの統一

#### 1.2 用語・表記の統一
- [x] `apps/frontend/src/components/layout/Sidebar.tsx` - メニュー項目の用語統一
- [x] `apps/frontend/src/components/layout/AppLayout.tsx` - ヘッダー表記修正
- [x] `apps/frontend/src/pages/ProjectsPage.tsx` - ページタイトル「キャンペーン一覧」に変更
- [x] 全コンポーネントで「novel」「project」→「campaign」「trpg」への変更確認（進行中：重要箇所は修正済み）

### 2. World Building UI の修正

#### 2.1 エラー状態の修正
- [x] **CRITICAL**: `apps/frontend/src/pages/WorldBuildingPage.tsx` - 「プロジェクトが選択されていません」エラー修正
- [x] **HIGH**: 初期状態管理の改善（キャンペーン未選択時の適切なUI表示）
- [x] **HIGH**: エラーハンドリングの改善
- [x] **MEDIUM**: ローディング状態の適切な表示

#### 2.2 拠点管理機能の完成
- [ ] **HIGH**: BaseTabコンポーネントとの統合確認
- [ ] **MEDIUM**: 拠点画像表示機能の実装
- [ ] **MEDIUM**: 拠点詳細編集機能の確認

### 3. Timeline UI の完成

#### 3.1 基本UI実装
- [x] **CRITICAL**: `apps/frontend/src/pages/TimelinePage.tsx` - 空白画面の修正
- [x] **HIGH**: 日単位タイムライン表示の実装
- [x] **HIGH**: セッション履歴表示機能の実装
- [x] **MEDIUM**: イベント表示・編集機能

#### 3.2 開発者モード二重機能
- [x] **HIGH**: プレイ中モード：セッション履歴閲覧機能
- [x] **HIGH**: 開発者モード：イベント管理・シナリオ設計機能
- [x] **MEDIUM**: モード切り替え時のUI動的変更

## ⚠️ **緊急度 中 (Medium Priority) - 1-2週間以内**

### 4. バックエンド統合の問題解決

#### 4.1 依存関係・ビルドの修正
- [x] `apps/frontend` - pnpm install タイムアウト問題解決
- [ ] Vite/TypeScript依存関係の修正
- [ ] esbuild モジュール不足の解決
- [ ] 開発サーバー起動問題の修正

#### 4.2 プロキシサーバー統合
- [ ] `apps/proxy-server` - サーバー起動確認
- [ ] API エンドポイント接続テスト
- [ ] AI エージェント設定の確認
- [ ] Socket.IO 接続の修正

### 5. ゲームシステム選択機能

#### 5.1 ゲームシステム選択UI
- [x] 新規作成: `apps/frontend/src/components/campaign/GameSystemSelector.tsx`
- [x] `TRPGCampaign` インターフェースにゲームシステム選択追加
- [x] Stormbringer以外のシステム対応（D&D 5e、Pathfinder等）
- [x] ルールセット動的ロード機能

#### 5.2 システム固有機能
- [ ] ダイス記法システム統合
- [ ] システム固有ステータス管理
- [ ] 呪文・能力システムの切り替え

### 6. キャラクターシート印刷・エクスポート機能

#### 6.1 PDF出力機能
- [x] jsPDF を使用したキャラクターシートPDF生成
- [x] 印刷レイアウトCSS作成
- [x] Stormbringerキャラクターシートテンプレート

#### 6.2 データエクスポート機能
- [x] JSON形式キャンペーンエクスポート
- [x] CSV形式キャラクターデータエクスポート
- [ ] インポート機能（他のTRPGツールとの連携）

### 7. UI/UX改善

#### 7.1 ナビゲーション最適化
- [ ] サイドバーのTRPG用アイコン統一
- [ ] 開発者モード切り替えの視覚的フィードバック改善
- [ ] キャンペーン選択状態の明確化
- [ ] ブレッドクラム ナビゲーション追加

#### 7.2 データ入力フローの改善
- [ ] キャンペーン作成ウィザード
- [ ] キャラクター作成ステップガイド
- [ ] バリデーションエラーの親切な表示
- [ ] 自動保存機能の実装

## 📝 **緊急度 低 (Low Priority) - 1ヶ月以内**

### 8. AI画像生成機能

#### 8.1 Google AI統合
- [ ] Google Imagen 3 API統合完成
- [ ] Vertex AI サービス設定
- [ ] 画像プロンプト最適化システム
- [ ] コスト制御・使用量制限

#### 8.2 画像生成機能実装
- [ ] **AI拠点画像生成機能** - 拠点説明からの自動画像生成
- [ ] **AIキャラクター画像生成機能** - キャラクター設定からの画像生成
- [ ] 画像管理・保存システム
- [ ] Cloud Storage連携

### 9. リアルタイム通信・マルチプレイヤー

#### 9.1 Socket.IO実装
- [ ] Socket.IO クライアント実装完成
- [ ] Socket.IO サーバー実装完成
- [ ] セッション状態同期システム
- [ ] 接続管理・エラーハンドリング

#### 9.2 マルチプレイヤー機能
- [ ] セッション招待・参加機能
- [ ] リアルタイムチャット機能
- [ ] 同期ダイスロール機能
- [ ] GMコントロール機能

### 10. 高度なTRPG機能

#### 10.1 セッション体験向上
- [ ] ダイスロール結果アニメーション改善
- [ ] キャラクター状態の視覚的表現強化
- [ ] チャット履歴の検索・フィルター機能
- [ ] 音響効果・BGM統合

#### 10.2 AI機能拡張
- [ ] AI GMの高度な応答システム
- [ ] 動的シナリオ生成機能
- [ ] NPCの自然な会話AI
- [ ] 戦闘バランス自動調整

---

### 11. クエスト・イベント分離機能

#### 11.1 クエストシステム再設計
- [ ] **HIGH**: PlotPageをクエスト管理専用に再設計
- [ ] **HIGH**: クエスト発見条件システム（NPC対話、クエストボード）
- [ ] **HIGH**: クエスト受注・進行管理UI
- [ ] **MEDIUM**: 報酬・前提条件表示システム

#### 11.2 イベントシステム強化
- [ ] **HIGH**: TimelinePageでの条件発火型イベント設計
- [ ] **HIGH**: 場所・時間ベースイベントトリガー
- [ ] **HIGH**: トラップイベントシステム実装（発見・解除・発動）
- [ ] **MEDIUM**: イベント結果による世界状態変化システム
- [ ] **MEDIUM**: クエストとイベントの相互作用

## 🎯 **実装フェーズ計画**

### Phase 1: 緊急修正 (1週間)
1. ホーム画面ブランディング修正 ✅
2. World Building UI読み込み問題修正
3. Timeline UI基本実装 ✅
4. バックエンド統合問題の基本解決

### Phase 2: 基本機能完成 (2-3週間)
5. ゲームシステム選択機能
6. キャラクターシート出力機能
7. UI/UX改善
8. データ入力フロー最適化

### Phase 3: 高度機能実装 (1-2ヶ月)
9. AI画像生成機能完成
10. リアルタイム通信実装
11. マルチプレイヤー対応
12. 高度なTRPG機能

---

## 📋 **テスト・検証項目**

### 機能テスト
- [ ] 全画面でのキャンペーン選択・表示確認
- [ ] ブランディング表記の一貫性確認
- [ ] World Building拠点管理機能テスト
- [ ] Timeline日程管理機能テスト
- [ ] TRPGセッション全機能テスト
- [ ] キャラクター作成・編集テスト
- [ ] 敵・NPC管理テスト
- [ ] 開発者モード切り替えテスト

### UI/UXテスト
- [ ] レスポンシブデザイン確認
- [ ] アクセシビリティ確認
- [ ] エラーハンドリング確認
- [ ] ローディング状態表示確認
- [ ] データ永続化確認

### パフォーマンステスト
- [ ] ページ読み込み速度測定
- [ ] 大量データ処理性能確認
- [ ] メモリ使用量監視
- [ ] API応答時間測定

---

## 📄 **関連ドキュメント**

- [TRPG実装不足点_Playwright分析結果.md](./TRPG実装不足点_Playwright分析結果.md) - 詳細分析結果
- [TRPG Application Comprehensive Analysis](/mnt/c/Users/irure/git/AIAgentTRPGGM/TRPG_Application_Analysis.md) - 包括的分析レポート
- [TRPG-AIエージェントGM-プロジェクト仕様書.md](./TRPG-AIエージェントGM-プロジェクト仕様書.md) - プロジェクト仕様
- [TRPG GMプロジェクト用変更点-清書版.md](./TRPG\ GMプロジェクト用変更点-清書版.md) - 変更点詳細

---

**注意**: このTODOリストは実際のアプリケーション分析に基づいており、既存の優秀な実装を活かしながら不足点を補完する方針で作成されています。